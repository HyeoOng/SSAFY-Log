const headers = { 'Content-Type': 'application/json' };
$("#joinBtn").click(async function() {
	const email = $("#email").val();
	const password = $("#password").val();
	const rePassword = $("#re_password").val();
	const name = $("#name").val();

	if(email == undefined || email.length<5 ){
		alert("이메일을 입력해주세요");
		return;
	}
	if(password == undefined || password == null || password == "" ||password != rePassword){
		alert("비밀번호가 맞지 않습니다. 다시 작성해주세요.");
		return;
	}
	if(name == undefined || name.length<2 ){
		alert("이름을 입력해주세요");
		return;
	}
	let data = JSON.stringify({ email, password ,name});
	data = await fetch("/api/member/join", {method: "POST",headers,body: data});
	if(!data.ok){
		alert("회원가입 실패 다시 시도해주세요");
		location.reload();
		return;
	}

    data = await data.json();

    // 응답으로 받은 email을 sessionStorage에 저장
    if (data.email) {
        sessionStorage.setItem("email", data.email);
        alert("회원가입이 완료되었습니다.");
        location.href = "/index.html";
    } else {
        alert("회원가입 중 문제가 발생했습니다.");
		location.reload();
    }
});